---
marp: true
theme: gaia
paginate: true
---

<!-- _class: lead -->
# **引用**

---

### **引用的声明与初始化**
**引用型变量是某个变量的别名，它和所引用的变量共享同一块内存地址。**
引用在声明时就必须进行初始化，而且之后无法再引用其他变量。
```cpp
int num = 10;
int& ref = num; // 声明并初始化引用 ref 为 num 的别名
```
`ref` 是 `num` 的引用，它们指向同一块内存地址，值是一样的。

---

### **引用作为函数参数**
引用可作为函数参数，这样就能在函数内部对实参进行修改。
```cpp
void swap(int& a, int& b) {
    int temp = a;
    a = b;
    b = temp;
}
```
在 `swap` 函数里，`a` 和 `b` 分别是传入实参的引用，对 `a` 和 `b` 的修改实际上就是对实参 `x` 和 `y` 的修改。

---

### **引用作为函数返回值**
函数也可以返回引用，不过要留意返回的引用必须指向有效的对象，不然会产生未定义行为。
```cpp
int& getLargest(int& a, int& b) {
    return (a > b) ? a : b;
}

```
在 `getLargest` 函数中，返回的是 `a` 和 `b` 中较大值的引用。

---

### **引用和指针的区别**

- **语法层面**：引用使用 `&` 符号声明，且声明时必须初始化；指针用 `*` 符号声明，可在声明后再赋值。
- **空值处理**：引用不能为 `null`，而指针可以指向 `nullptr`。
- **使用方式**：引用使用时无需解引用操作，可直接当作变量使用；指针需要使用 `*` 进行解引用操作。 

---

### **注意问题-确保引用初始化**
引用在声明时必须初始化，若不初始化会导致编译错误。
```cpp
int num = 10;
int& ref = num; 
```

---

### **注意问题-避免悬空引用**
悬空引用指的是引用指向已经被销毁的对象。当函数返回<font color=purple>局部变量的引用，</font>
或者对象生命周期结束后仍保留对它的引用时，就会产生悬空引用。
```cpp
// 错误示例：返回局部变量的引用
int& badFunction() {
    int localNum = 20;
    return localNum; 
}
```
要避免悬空引用，可让函数返回对象的副本，或者确保引用的对象生命周期足够长。
比如，使用静态变量或者动态分配的内存。

---

### **注意问题-明确引用绑定的对象**
一旦引用被初始化，它就会一直绑定到该对象，不能再重新绑定到其他对象。
这与指针不同，指针可以改变指向的对象。
```cpp
int num1 = 10;
int num2 = 20;
int& ref = num1;
// 这不是重新绑定引用，而是给 num1 赋值
ref = num2; 
```